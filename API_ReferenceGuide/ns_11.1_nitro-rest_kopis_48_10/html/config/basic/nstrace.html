<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="../../../rdx/css/rdx.css" rel="stylesheet" type="text/css"/>
    <link href="../../../index.css" rel="stylesheet" type="text/css"/><title>nstrace</title>
</head>
<body class="ns_body">
<p class="ns_wp_header">nstrace</p>
<P>Configuration for nstrace operations resource.</P><p class="heading">Read/write properties</p><p class="property_name">nf<span class="property_type">&lt;Double&gt;</span></p><p class="property_description">Number of files to be generated in cycle.<br/>Default value: 24<br/>Minimum value =  1<br/>Maximum value =  100</p><p class="property_name">time<span class="property_type">&lt;Double&gt;</span></p><p class="property_description">Time per file (sec).<br/>Default value: 3600<br/>Minimum value =  1</p><p class="property_name">size<span class="property_type">&lt;Double&gt;</span></p><p class="property_description">Size of the captured data. Set 0 for full packet trace.<br/>Default value: 164<br/>Minimum value =  0<br/>Maximum value =  1514</p><p class="property_name">mode<span class="property_type">&lt;String[]&gt;</span></p><p class="property_description">Capturing mode for trace. Mode can be any of the following values or combination of these values:<br/>      RX          Received packets before NIC pipelining (Filter does not work when RX capturing mode is ON)<br/>      NEW_RX      Received packets after NIC pipelining<br/>      TX          Transmitted packets<br/>      TXB         Packets buffered for transmission<br/>      IPV6        Translated IPv6 packets<br/>      C2C         Capture C2C message<br/>      NS_FR_TX    TX/TXB packets are not captured in flow receiver.<br/>      MPTCP       MPTCP master flow<br/>      Default mode: NEW_RX TXB .<br/>Default value: DEFAULT_MODE<br/>Possible values = TX, TXB, RX, IPV6, NEW_RX, C2C, NS_FR_TX, APPFW, MPTCP</p><p class="property_name">pernic<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Use separate trace files for each interface. Works only with tcpdump format.<br/>Default value: DISABLED<br/>Possible values = ENABLED, DISABLED</p><p class="property_name">filename<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Name of the trace file.</p><p class="property_name">fileid<span class="property_type">&lt;String&gt;</span></p><p class="property_description">ID for the trace file name for uniqueness. Should be used only with -name option.</p><p class="property_name">filter<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Filter expression for nstrace. Maximum length of filter is 255 and it can be of following format:<br/>     &lt;expression&gt; [&lt;relop&gt; &lt;expression&gt;]<br/><br/>     &lt;relop&gt; = ( &amp;&amp; | || )<br/><br/>     &lt;expression&gt; =:<br/>     CONNECTION.&lt;qualifier&gt;.&lt;qualifier-method&gt;.(&lt;qualifier-value&gt;)<br/><br/>     &lt;qualifier&gt; = SRCIP<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  = A valid IPv4 address.<br/>     example = CONNECTION.SRCIP.EQ(127.0.0.1)<br/><br/>     &lt;qualifier&gt; = DSTIP<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  = A valid IPv4 address.<br/>     example = CONNECTION.DSTIP.EQ(127.0.0.1)<br/><br/>     &lt;qualifier&gt; = IP<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  = A valid IPv4 address.<br/>     example = CONNECTION.IP.EQ(127.0.0.1)<br/><br/>     &lt;qualifier&gt; = SRCIPv6<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  = A valid IPv6 address.<br/>     example = CONNECTION.SRCIPv6.EQ(2001:db8:0:0:1::1)<br/><br/>     &lt;qualifier&gt; = DSTIPv6<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  = A valid IPv6 address.<br/>     example = CONNECTION.DSTIPv6.EQ(2001:db8:0:0:1::1)<br/><br/>     &lt;qualifier&gt; = IPv6<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  = A valid IPv6 address.<br/>     example = CONNECTION.IPv6.EQ(2001:db8:0:0:1::1)<br/><br/>     &lt;qualifier&gt; = SRCPORT<br/>     &lt;qualifier-method&gt; = [ EQ | NE | GT | GE | LT | LE<br/>                         | BETWEEN ]<br/>     &lt;qualifier-value&gt;  = A valid port number.<br/>     example = CONNECTION.SRCPORT.EQ(80)<br/><br/>     &lt;qualifier&gt; = DSTPORT<br/>     &lt;qualifier-method&gt; = [ EQ | NE | GT | GE | LT | LE<br/>                         | BETWEEN ]<br/>     &lt;qualifier-value&gt;  = A valid port number.<br/>     example = CONNECTION.DSTPORT.EQ(80)<br/><br/>     &lt;qualifier&gt; = PORT<br/>     &lt;qualifier-method&gt; = [ EQ | NE | GT | GE | LT | LE<br/>                         | BETWEEN ]<br/>     &lt;qualifier-value&gt;  = A valid port number.<br/>     example = CONNECTION.PORT.EQ(80)<br/><br/>     &lt;qualifier&gt; = VLANID<br/>     &lt;qualifier-method&gt; = [ EQ | NE | GT | GE | LT | LE<br/>                         | BETWEEN ]<br/>     &lt;qualifier-value&gt;  = A valid VLAN ID.<br/>     example = CONNECTION.VLANID.EQ(0)<br/><br/>     &lt;qualifier&gt; = CONNID<br/>     &lt;qualifier-method&gt; = [ EQ | NE | GT | GE | LT | LE<br/>                         | BETWEEN ]<br/>     &lt;qualifier-value&gt;  = A valid PCB dev number.<br/>     example = CONNECTION.CONNID.EQ(0)<br/><br/>     &lt;qualifier&gt; = PPEID<br/>     &lt;qualifier-method&gt; = [ EQ | NE | GT | GE | LT | LE<br/>                         | BETWEEN ]<br/>     &lt;qualifier-value&gt;  = A valid core ID.<br/>       example = CONNECTION.PPEID.EQ(0)    <br/><br/>     &lt;qualifier&gt; = SVCNAME<br/>     &lt;qualifier-method&gt; = [ EQ | NE | CONTAINS | STARTSWITH <br/>                         | ENDSWITH ] <br/>     &lt;qualifier-value&gt;  = A valid text string.<br/>     example = CONNECTION.SVCNAME.EQ(&quot;name&quot;)<br/><br/>     &lt;qualifier&gt; = LB_VSERVER.NAME<br/>     &lt;qualifier-method&gt; = [ EQ | NE | CONTAINS | STARTSWITH<br/>                        | ENDSWITH ]<br/>     &lt;qualifier-value&gt;  = LB vserver name.<br/>     example = CONNECTION.LB_VSERVER.NAME.EQ(&quot;name&quot;)<br/><br/>     &lt;qualifier&gt; = CS_VSERVER.NAME<br/>     &lt;qualifier-method&gt; = [ EQ | NE | CONTAINS | STARTSWITH<br/>                        | ENDSWITH ]<br/>     &lt;qualifier-value&gt;  = CS vserver name.<br/>     example = CONNECTION.CS_VSERVER.NAME.EQ(&quot;name&quot;)<br/><br/>     &lt;qualifier&gt; = INTF<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  =  A valid interface id in the<br/>                    form of x/y.<br/>     example = CONNECTION.INTF.EQ(&quot;x/y&quot;)<br/><br/>     &lt;qualifier&gt; = SERVICE_TYPE<br/>     &lt;qualifier-method&gt; = [ EQ | NE ]<br/>     &lt;qualifier-value&gt;  = ( SVC_HTTP | FTP | TCP | UDP | SSL |<br/>        SSL_BRIDGE | SSL_TCP | NNTP | RPCSVR | RPCSVRS |<br/>        RPCCLNT | SVC_DNS | ADNS | SNMP | RTSP | DHCPRA | ANY|<br/>        MONITOR | MONITOR_UDP | MONITOR_PING | SIP_UDP |<br/>        SVC_MYSQL | SVC_MSSQL | SERVICE_UNKNOWN )<br/>     example = CONNECTION.SERVICE_TYPE.EQ(ANY)<br/><br/>     &lt;qualifier&gt; = TRAFFIC_DOMAIN_ID<br/>     &lt;qualifier-method&gt; = [ EQ | NE | GT | GE | LT | LE<br/>                         | BETWEEN ]<br/>     &lt;qualifier-value&gt;  = A valid traffic domain ID.<br/>     example = CONNECTION.TRAFFIC_DOMAIN_ID.EQ(0)<br/><br/>     eg: start nstrace -filter &quot;CONNECTION.SRCIP.EQ(127.0.0.1) || (CONNECTION.SVCNAME.NE(&quot;s1&quot;) &amp;&amp; CONNECTION.SRCPORT.EQ(80))&quot;<br/>     The filter expression should be given in double quotes. <br/><br/>common use cases:<br/><br/>Trace capturing full sized traffic from/to ip 10.102.44.111, excluding loopback traffic<br/>start nstrace -size 0 -filter &quot;CONNECTION.IP.NE(127.0.0.1) &amp;&amp; CONNECTION.IP.EQ(10.102.44.111)&quot;<br/><br/>Trace capturing all traffic to (terminating at) port 80 or 443 <br/>start nstrace -size 0 -filter &quot;CONNECTION.DSTPORT.EQ(443) || CONNECTION.DSTPORT.EQ(80)&quot;<br/><br/>Trace capturing all backend traffic specific to service service1 along with corresponding client side traffic<br/>start nstrace -size 0 -filter &quot;CONNECTION.SVCNAME.EQ(&quot;service1&quot;)&quot; -link ENABLED<br/><br/>Trace capturing all traffic through NS interface 1/1<br/>start nstrace -filter &quot;CONNECTION.INTF.EQ(&quot;1/1&quot;)&quot;<br/><br/>Trace capturing all traffic specific through vlan 2<br/>start nstrace -filter &quot;CONNECTION.VLANID.EQ(2)&quot;<br/><br/>Trace capturing all frontend (client side) traffic specific to lb vserver vserver1 along with corresponding server side traffic<br/>start nstrace -size 0 -filter &quot;CONNECTION.LB_VSERVER.NAME.EQ(&quot;vserver1&quot;)&quot; -link ENABLED .</p><p class="property_name">link<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Includes filtered connection&#39;s peer traffic.<br/>Default value: DISABLED<br/>Possible values = ENABLED, DISABLED</p><p class="property_name">nodes<span class="property_type">&lt;Double[]&gt;</span></p><p class="property_description">Nodes on which tracing is started.<br/><br/>Minimum value =  0<br/>Maximum value =  32</p><p class="property_name">filesize<span class="property_type">&lt;Double&gt;</span></p><p class="property_description">File size, in MB, treshold for rollover.<br/><br/>Default value: 0<br/>Minimum value =  0<br/>Maximum value =  65536</p><p class="property_name">traceformat<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Format in which trace will be generated<br/>.<br/>Default value: 0<br/>Possible values = NSCAP, PCAP</p><p class="property_name">merge<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Specify how traces across PE&#39;s are merged<br/>.<br/>Default value: 0<br/>Possible values = ONSTOP, ONTHEFLY, NOMERGE</p><p class="property_name">doruntimecleanup<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Enable or disable runtime temp file cleanup.<br/>Default value: ENABLED<br/>Possible values = ENABLED, DISABLED</p><p class="property_name">tracebuffers<span class="property_type">&lt;Double&gt;</span></p><p class="property_description">Number of 16KB trace buffers.<br/>Default value: 5000<br/>Minimum value =  1000</p><p class="property_name">skiprpc<span class="property_type">&lt;String&gt;</span></p><p class="property_description">skip RPC packets.<br/>Default value: DISABLED<br/>Possible values = ENABLED, DISABLED</p><p class="property_name">skiplocalssh<span class="property_type">&lt;String&gt;</span></p><p class="property_description">skip local SSH packets.<br/>Default value: DISABLED<br/>Possible values = ENABLED, DISABLED</p><p class="property_name">capsslkeys<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Capture SSL Master keys. Master keys will not be captured on FIPS machine.<br/>                Warning: The captured keys can be used to decrypt information that may be confidential. The captured key files have to be stored in a secure environment.<br/>Default value: DISABLED<br/>Possible values = ENABLED, DISABLED</p><p class="property_name">inmemorytrace<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Logs packets in appliance&#39;s memory and dumps the trace file on stopping the nstrace operation.<br/>Default value: DISABLED<br/>Possible values = ENABLED, DISABLED</p><p class="heading">Read only properties</p><p class="property_name">state<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Current running state of trace.<br/>Default value: 0<br/>Possible values = RUNNING, STOPPED</p><p class="property_name">scope<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Scope of started trace, local or cluster level.<br/>Default value: 0<br/>Possible values = CLUSTER, LOCAL</p><p class="property_name">tracelocation<span class="property_type">&lt;String&gt;</span></p><p class="property_description">Directory where current trace files are saved.</p>
<p class="heading">Operations</p><p class="property_name">You can perform the following operations:<br/></p><a href="#get" class="operation">get (all)</a><p class="property_name">Some options that you can use for each operation:</p><ul><li><p><b>Getting warnings in response: </b>NITRO allows you to get warnings in an operation by specifying the "warning" query parameter as "yes". For example, to get warnings while connecting to the NetScaler appliance, the URL is as follows:<br/><span class="url_value">http://<font color="#009933">&lt;netscaler-ip-address&gt;</font>/nitro/v1/config/lbvserver?<b>warning=yes</b></span></p><p>If any, the warnings are displayed in the "X-NITRO-WARNING" header and the HTTP status code is 209.</p></li><li><p><b>Authenticated access for individual NITRO operations: </b>One of the authentication mechanisms is OneTimelogin/Basic authentication. You can use the below two headers specifying username and password and send it along with the regular nitro request.</p>X-NITRO-USER:<font color="#009933">&lt;username&gt;</font><br/>X-NITRO-PASS:<font color="#009933">&lt;password&gt;</font><br/><br/><b>Note:</b> In such cases, make sure that the request header <b>DOES not</b> include the following:<br/>Cookie:NITRO_AUTH_TOKEN=<font color="#009933">&lt;tokenvalue&gt;</font></p></ul></li><p class="property_name">NOTE: Mandatory parameters are marked <font color="FF0000"><b>red and bold. </b></font>Placeholder text is marked in <font color="009933">green.</font></p><p class="heading"><a name="get">get (all)</a></p><p class="key">URL:<span class="url_value">http://<font color="#009933">&lt;netscaler-ip-address&gt;</font>/nitro/v1/config/nstrace</span></p><p class="key">HTTP Method:<span class="value">GET</span></p><p class="key">Request Headers:</span></p><p class="property_description">Cookie:NITRO_AUTH_TOKEN=<font color="#009933">&lt;tokenvalue&gt;</font><br/>Accept:application/json</p><p class="key">Response:</p><p class="property_description">HTTP Status Code on Success: 200 OK<br/>HTTP Status Code on Failure: 4xx &lt;string&gt; (for general HTTP errors) or 5xx &lt;string&gt; (for NetScaler-specific errors). The response payload provides details of the error</p><p class="key">Response Header:</span></p><p class="property_description">Content-Type:application/json</p><p class="key">Response Payload:</p><p class="payload">{ "nstrace": [ {<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"state":<font color='#009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"scope":<font color='#009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tracelocation":<font color='#009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"nf":<font color='009933'>&lt;Double_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"time":<font color='009933'>&lt;Double_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"size":<font color='009933'>&lt;Double_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"mode":<font color='009933'>&lt;String[]_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"traceformat":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"pernic":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"filename":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"fileid":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"filter":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"link":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"nodes":<font color='009933'>&lt;Double[]_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"merge":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"doruntimecleanup":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tracebuffers":<font color='009933'>&lt;Double_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"skiprpc":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"skiplocalssh":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"capsslkeys":<font color='009933'>&lt;String_value&gt;</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"inmemorytrace":<font color='009933'>&lt;String_value&gt;</font><br/>}]}</p></body></html>